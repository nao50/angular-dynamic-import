{"ast":null,"code":"import _asyncToGenerator from \"/Users/nao/nodejs/angular-dynamic-import/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { BlueComponent } from './blue/blue.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/widget.service\";\nimport * as i2 from \"@angular/router\";\nconst _c0 = [\"dynamic\"];\nexport class AppComponent {\n  constructor(widgetService, resolver) {\n    this.widgetService = widgetService;\n    this.resolver = resolver;\n  }\n\n  ngOnInit() {\n    this.listWidgets(); // const aaa = this.loadDynamicComponent('blue');\n    // console.log('aaa:', aaa)\n  }\n\n  listWidgets() {\n    this.widgetService.listWidgets('assets/widgets.json').subscribe(data => {\n      console.log(data);\n    });\n  }\n\n  loadDynamicComponent(type) {\n    console.log(\"loadDynamicComponent\");\n    this.factory = this.resolver.resolveComponentFactory(BlueComponent);\n  } // loadDynamicComponent(type: string): any {\n\n\n  loadDynamicComponent2(type) {\n    return _asyncToGenerator(function* () {\n      // const widgetModule = await import(`./${type}/${type}.module`)\n      // return new widgetModule.BlueModule.BlueComponent\n      // const widgetModule = await import(`./blue/blue.module`)\n      const widgetModule = yield import(`./blue/blue.component`);\n      const hoge = new widgetModule.BlueComponent();\n    })();\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.WidgetService), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  viewQuery: function AppComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewContainerRef = _t.first);\n    }\n  },\n  decls: 11,\n  vars: 0,\n  consts: [[1, \"m-24\", \"flex\", \"flex-wrap\", \"gap-x-2\", \"justify-center\"], [1, \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"rounded-md\", \"text-white\", \"bg-blue-400\", \"hover:bg-blue-600\", 3, \"click\"], [1, \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"rounded-md\", \"text-white\", \"bg-yellow-400\", \"hover:bg-yellow-600\"], [1, \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"rounded-md\", \"text-white\", \"bg-red-400\", \"hover:bg-red-600\"], [\"dynamic\", \"\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_1_listener() {\n        return ctx.loadDynamicComponent(\"blue\");\n      });\n      i0.ɵɵtext(2, \" Add Blue Component \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 2);\n      i0.ɵɵtext(4, \" Add Yellow Component \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵtext(6, \" Add Red Component \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", null, 4);\n      i0.ɵɵtext(9, \"sss\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"router-outlet\");\n    }\n  },\n  directives: [i2.RouterOutlet],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["/Users/nao/nodejs/angular-dynamic-import/src/app/app.component.ts","/Users/nao/nodejs/angular-dynamic-import/src/app/app.component.html"],"names":[],"mappings":";AAEA,SAAS,aAAT,QAA8B,uBAA9B;;;;;AAOA,OAAM,MAAO,YAAP,CAAmB;AAKvB,EAAA,WAAA,CACU,aADV,EAEU,QAFV,EAE4C;AADlC,SAAA,aAAA,GAAA,aAAA;AACA,SAAA,QAAA,GAAA,QAAA;AACN;;AAEJ,EAAA,QAAQ,GAAA;AACN,SAAK,WAAL,GADM,CAGN;AACA;AACD;;AAED,EAAA,WAAW,GAAA;AACT,SAAK,aAAL,CAAmB,WAAnB,CAA+B,qBAA/B,EAAsD,SAAtD,CAAgE,IAAI,IAAG;AACrE,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACD,KAFD;AAGD;;AAED,EAAA,oBAAoB,CAAC,IAAD,EAAa;AAC/B,IAAA,OAAO,CAAC,GAAR,CAAY,sBAAZ;AACA,SAAK,OAAL,GAAe,KAAK,QAAL,CAAc,uBAAd,CAAsC,aAAtC,CAAf;AACD,GA1BsB,CA4BvB;;;AACc,EAAA,qBAAqB,CAAC,IAAD,EAAa;AAAA;AAC9C;AACA;AAEA;AACA,YAAM,YAAY,SAAS,OAAO,uBAAP,CAA3B;AACA,YAAM,IAAI,GAAG,IAAI,YAAY,CAAC,aAAjB,EAAb;AAN8C;AAO/C;;AApCsB;;;mBAAZ,Y,EAAY,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,aAAA,C,EAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,CAAA,wBAAA,C;AAAA,C;;;QAAZ,Y;AAAY,EAAA,SAAA,EAAA,CAAA,CAAA,UAAA,CAAA,C;AAAA,EAAA,SAAA,EAAA,SAAA,kBAAA,CAAA,EAAA,EAAA,GAAA,EAAA;AAAA,QAAA,EAAA,GAAA,CAAA,EAAA;;;;;;;;;;;;;;;ACTzB,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,CAAA;AACE,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,QAAA,EAAA,CAAA;AAaE,MAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,SAAA,6CAAA,GAAA;AAAA,eAAS,GAAA,CAAA,oBAAA,CAAqB,MAArB,CAAT;AAAqC,OAArC;AAEA,MAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,sBAAA;AACF,MAAA,EAAA,CAAA,YAAA;AAEA,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,QAAA,EAAA,CAAA;AAcE,MAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,wBAAA;AACF,MAAA,EAAA,CAAA,YAAA;AAEA,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,QAAA,EAAA,CAAA;AAcE,MAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,qBAAA;AACF,MAAA,EAAA,CAAA,YAAA;AAGF,MAAA,EAAA,CAAA,YAAA;AAgCA,MAAA,EAAA,CAAA,cAAA,CAAA,CAAA,EAAA,KAAA,EAAA,IAAA,EAAA,CAAA;AAAc,MAAA,EAAA,CAAA,MAAA,CAAA,CAAA,EAAA,KAAA;AAAG,MAAA,EAAA,CAAA,YAAA;AAEjB,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,eAAA","sourcesContent":["import { Component, ComponentFactory, ComponentFactoryResolver, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { WidgetService } from './services/widget.service';\nimport { BlueComponent } from './blue/blue.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  factory?: ComponentFactory<BlueComponent>;\n  @ViewChild('dynamic', {static: true}) viewContainerRef!: ViewContainerRef;\n\n\n  constructor(\n    private widgetService: WidgetService,\n    private resolver: ComponentFactoryResolver\n  ) {}\n\n  ngOnInit(): void {\n    this.listWidgets()\n\n    // const aaa = this.loadDynamicComponent('blue');\n    // console.log('aaa:', aaa)\n  }\n\n  listWidgets() {\n    this.widgetService.listWidgets('assets/widgets.json').subscribe(data => {\n      console.log(data)\n    });\n  }\n\n  loadDynamicComponent(type: string): void {\n    console.log(\"loadDynamicComponent\")\n    this.factory = this.resolver.resolveComponentFactory(BlueComponent);\n  }\n\n  // loadDynamicComponent(type: string): any {\n  private async loadDynamicComponent2(type: string): Promise<any> {\n    // const widgetModule = await import(`./${type}/${type}.module`)\n    // return new widgetModule.BlueModule.BlueComponent\n\n    // const widgetModule = await import(`./blue/blue.module`)\n    const widgetModule = await import(`./blue/blue.component`)\n    const hoge = new widgetModule.BlueComponent\n  }\n\n}\n\n","<div class=\"m-24 flex flex-wrap gap-x-2 justify-center\">\n  <button\n    class=\"\n      py-2\n      px-4\n      border border-transparent\n      shadow-sm\n      text-sm\n      font-medium\n      rounded-md\n      text-white\n      bg-blue-400\n      hover:bg-blue-600\n    \"\n    (click)=\"loadDynamicComponent('blue')\"\n  >\n    Add Blue Component\n  </button>\n\n  <button\n    class=\"\n      py-2\n      px-4\n      border border-transparent\n      shadow-sm\n      text-sm\n      font-medium\n      rounded-md\n      text-white\n      bg-yellow-400\n      hover:bg-yellow-600\n    \"\n  >\n    Add Yellow Component\n  </button>\n\n  <button\n    class=\"\n      py-2\n      px-4\n      border border-transparent\n      shadow-sm\n      text-sm\n      font-medium\n      rounded-md\n      text-white\n      bg-red-400\n      hover:bg-red-600\n    \"\n  >\n    Add Red Component\n  </button>\n\n  <!--  -->\n</div>\n<!-- \n<div\n  class=\"\n    rounded-full\n    h-24\n    w-24\n    flex\n    items-center\n    justify-center\n    bg-blue-400\n    text-white\n  \"\n>\n  Circle\n</div>\n\n<div\n  class=\"\n    rounded-full\n    h-24\n    w-24\n    flex\n    items-center\n    justify-center\n    bg-blue-400\n    text-white\n  \"\n>\n  Circle\n</div> -->\n\n<div #dynamic>sss</div>\n\n<router-outlet></router-outlet>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}